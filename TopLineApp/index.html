<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta charset="utf-8" />
		<script src="cordova.js"></script>
		<script src="kendo/js/jquery.min.js"></script>
		<script src="kendo/js/kendo.all.min.js"></script>

		<link href="kendo/styles/kendo.common.min.css" rel="stylesheet" />
		<link href="kendo/styles/kendo.default.min.css" rel="stylesheet" />
		<link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />

		<link href="styles/main.css" rel="stylesheet" />
		<link href="styles/ModalViewLogin.css" rel="stylesheet" />

	</head>

	<!DOCTYPE html>
	<html>

		<body>

			<div data-role="view" id="tabstrip-filaVez" data-init="getListaFilaDaVez"  data-layout="mobile-tabstrip" data-title="Fila da Vez">
				<ul id="lstVendedoresFila" data-role="listview" data-style="inset" ></ul>
				<ul id="actions" data-role="actionsheet" data-cancel="Cancelar">
					<li class="km-actionsheet-title">Selecione operação:</li>
					<li>
						<a href="#" data-action="editProduct">Resultado Atendimento</a>
					</li>
					<li>
						<a href="#" data-action="getResumoDiario">Resumo Diário de Vendas</a>
					</li>
					<li>
						<a href="#" data-action="getMotivos">Sair Fila da Vez</a>
					</li>
				</ul>
			</div>

			<script type="text/x-kendo-template" id="listVendedoresFilaTemplate">

				<a
					class="details-link"
					data-role="listview-link"
					data-rel="actionsheet"
					href="\\#actions"
					data-actionsheet-context="#= IdVendedor #" >
					<img src="${Foto}"  />
					<h2>#:VendedorApelido#</h2>
				</a>
				
			</script>

			<script type="text/x-kendo-template" id="listMotivosSaidaTemplate">			
				
				<a
					class="details-link"
					data-role="listview-link">
					<h4>#:Motivo#</h4>
				</a>

			</script>

			<!--Resultado Atendimento-->
			<div id="resultadoAtendimento" data-role="view" data-title="Resultado Atendimento" data-layout="mobile-tabstrip">
				<ul id="form" data-role="listview" data-style="inset">

					<div>
						<li>
							<h4>
								<img src="images/Contacts.jpeg" width=80px/> Rafael Fernandes
							</h4>
						</li>
					</div>
					<li >
						Vendeu:
						<input type="checkbox" data-role="switch" checked>
					</li>

					<li>
						<label>
							Valor da Venda:
							<input id="valorVenda" name="ValorVenda"type="number" value="0" min="0" />
						</label>
					</li>
					<li>
						<label>
							Qtde de Peças:
							<input id="qtdePecas" name="QtdePecas"type="number" value="0" min="0" />
						</label>
					</li>
				</ul>
			</div>

			<!--Resumo Diário-->
			<div id="resumoDiario" data-role="view" >
				<div data-role="header">
					<div data-role="navbar">
						<span>Resumo Diário</span>
						<a href="#tabstrip-filaVez" data-role="button" data-align="right">Voltar</a>
					</div>
				</div>
				<ul id="form" data-role="listview" data-style="inset">

					<li>
						Nome do Produto: <span data-bind="text: ProductName"></span>
					</li>
					<li>
						Preço Unitário: <span data-bind="text: UnitPrice"></span>
					</li>
					<li>
						Qtde Estoque: <span data-bind="text: UnitsInStock"></span>
					</li>
					<li>
						<label>
							Inativo: <span data-bind="text: Discontinued"></span>
						</label>
					</li>
				</ul>
			</div>

			<div data-role="modalview" id="modalview-login" style="width: 95%; height: 190px;" data-layout="mobile-tabstrip" >
				<div data-role="header">
					<div data-role="navbar">
						<span>Login</span>
						<a data-click="closeModalViewLogin" data-role="button" data-align="right">Cancelar</a>
					</div>
				</div>

				<ul data-role="listview" data-style="inset">
					<li>
						<label for="username">Usuário:</label>
						<input type="text" id="username" />
					</li>
					<li>
						<label for="password">Senha:</label>
						<input type="password" id="password" />
					</li>
				</ul>
				<a data-click="closeModalViewLogin" id="modalview-login-button" type="button" data-role="button">Entrar</a>
			</div>

			<!--Motivos saída salão de vendas-->
			<div id="motivosSaida" data-role="view" data-title="Motivo Saída" data-init="getMotivosSaida" >
				<div data-role="header">
					<div data-role="navbar">
						<span>Motivos Saída</span>
						<a href="#tabstrip-filaVez" data-role="button" data-align="right">Voltar</a>
					</div>
				</div>
				<ul id="lstMotivosSaida" data-role="listview" data-style="inset"/>
			</div>

			<!--Grafico resultado de Atendimento-->
			<div id="grafResultadoAtendimento" class="k-content" data-role="view" data-title="Resumo de Vendas" data-layout="mobile-tabstrip">
				<div class="chart-wrapper">
					<div id="chart"></div>
				</div>

			</div>

			<div data-role="layout" data-id="mobile-tabstrip"   >
				<header data-role="header">
					<div data-role="navbar">
						<span data-role="view-title"></span>
					</div>
				</header>

				<p>TabStrip</p>

				<div data-role="footer">
					<div data-role="tabstrip">
						<a href="#tabstrip-filaVez" data-icon="contacts">Fila</a>
						<a href="#tabstrip-configuracoes" data-icon="settings">Consultas</a>
						<a href="#modalview-login" data-icon="settings" data-rel="modalview" >Configurações</a>
					</div>
				</div>
			</div>

			<script>
			
				var app = new kendo.mobile.Application(document.body);
				      
				//Url
				var baseUrl = "http://localhost:50000/api";
                
				//schema
				var schemaVendedores = { 
					model: {
						id: "IdVendedor",
						fields: {
							IdVendedor: { editable: false, nullable: false },
							VendedorNome: { editable: false, nullable: false },
							VendedorApelido: { editable: false, nullable: false },
							Fila: { editable: false, nullable: false },
							PosicaoFila: { editable: false, nullable: false },            
							Foto: { editable: false, nullable: false }            
						} 
					}
				};

				//dataSource
				var dataSourceVendedores = new kendo.data.DataSource({                    
					transport: {						
						read:  {
							url: baseUrl + "/Vendedor",							
							type:"GET"      
							,contentType: "application/json"
							,dataType: "json"
						}
					},
					batch: true,
					schema: schemaVendedores,
					group: "Fila", 
					sort: { field: "PosicaoFila", dir: "asc" }	
				});
			
				//schema
				var schemaMotivosSaida = { 
					model: {
						id: "idMotivo",
						fields: {
							idMotivo: { editable: false, nullable: false },
							Motivo: { editable: false, nullable: false }
						} 
					}
				};

				//dataSource
				var dataSourceMotivosSaida = new kendo.data.DataSource({                    
					transport: {						
						read:  {
							url: baseUrl + "/Motivos",							
							type:"GET"      
							,contentType: "application/json"
							,dataType: "json"
						}
					},
					batch: true,
					schema: schemaMotivosSaida
				});

				function getListaFilaDaVez() {
					$("#lstVendedoresFila").kendoMobileListView({
						dataSource: dataSourceVendedores,
						template: $("#listVendedoresFilaTemplate").html(),
						headerTemplate: "${value}",		
						fixedHeaders: true
					});
				}
			                
				function getMotivosSaida() {
					$("#lstMotivosSaida").kendoMobileListView({
						dataSource: dataSourceMotivosSaida,
						template: $("#listMotivosSaidaTemplate").html(),
						headerTemplate: "${value}",		
						fixedHeaders: true
					});
				}
				                
				function editProduct(e) {				
					app.navigate("#resultadoAtendimento"); //navigates to editor view
				}

				function getPerformace(e) {				
					app.navigate("#grafResultadoAtendimento"); //navigates to editor view
				}
				function getMotivos(e) {				
					app.navigate("#motivosSaida"); //navigates to editor view
				}
                
				function closeModalViewLogin() {
					$("#modalview-login").kendoMobileModalView("close");
				}
                
				function createChart() {
					$("#chart").kendoChart({
						theme: $(document).data("kendoSkin") || "default",
						title: {
							text: "Posição de Vendas"
						},
						legend: {
							position: "bottom",
							labels: {
								template: "#= text # (#= value #%)"
							}
						},
						seriesDefaults: {
							labels: {
								visible: true,
								format: "{0}%"
							}
						},
						series: [
							{
								type: "pie",
								data: [
									{
										category: "Hydro",
										value: 22
									}, {
										category: "Solar",
										value: 2
									}, {
										category: "Nuclear",
										value: 49
									}, {
										category: "Wind",
										value: 27
									}
								]
							}
						],
						tooltip: {
							visible: true,
							format: "{0}%"
						}
					});
				}
					
				$(document).ready(function() {
					setTimeout(function() {
						// Initialize the chart with a delay to make sure
						// the initial animation is visible
						createChart();
					
						$("#example").bind("kendo:skinChange", function(e) {
							createChart();
						});
					}, 400);
				})
                
			</script>

		</body>
	</html>

</html>

                            